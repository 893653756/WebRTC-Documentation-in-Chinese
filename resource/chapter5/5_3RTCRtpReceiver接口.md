## [5.3 RTCRtpReceiver Interface](http://w3c.github.io/webrtc-pc/#rtcrtpreceiver-interface)

The RTCRtpReceiver interface allows an application to inspect the receipt of a MediaStreamTrack.

zh:RTCRtpReceiver接口允许应用程序检查MediaStreamTrack的接收。

To create an RTCRtpReceiver with a string, kind, run the following steps:

zh:要使用字符串kind来创建RTCRtpReceiver，请运行以下步骤：

1.  Let receiver be a new RTCRtpReceiver object. 
zh: 让接收器成为新的RTCRtpReceiver对象。

2.  Let track be a new MediaStreamTrack object [GETUSERMEDIA]. The source of track is a remote source provided by receiver. Note that the track.id is generated by the user agent and does not map to any track IDs on the remote side. 
zh: 让track成为一个新的MediaStreamTrack对象[GETUSERMEDIA]。轨道源是接收器提供的远程源。请注意，track.id由用户代理生成，不会映射到远程端的任何轨道ID。

3.  Initialize track.kind to kind. 
zh: 将track.kind初始化为kind。

4.  Initialize track.label to the result of concatenating the string "remote " with kind. 
zh: 将track.label初始化为将字符串“remote”与kind连接的结果。

5.  Initialize track.readyState to live. 
zh: 将track.readyState初始化为live。

6.  Initialize track.muted to true. See the MediaStreamTrack section about how the muted attribute reflects if a MediaStreamTrack is receiving media data or not. 
zh: 将track.muted初始化为true。请参阅MediaStreamTrack部分，了解如果MediaStreamTrack是否正在接收媒体数据，则静音属性如何反映。

7.  Let receiver have a [[ReceiverTrack]] internal slot initialized to track. 
zh: 让接收器初始化[[ReceiverTrack]]内部插槽以跟踪。

8.  Let receiver have a [[ReceiverTransport]] internal slot initialized to null. 
zh: 让接收器将[[ReceiverTransport]]内部插槽初始化为null。

9.  Let receiver have a [[ReceiverRtcpTransport]] internal slot initialized to null. 
zh: 让接收器将[[ReceiverRtcpTransport]]内部插槽初始化为null。

10.  Let receiver have an [[AssociatedRemoteMediaStreams]] internal slot, representing a list of MediaStream objects that the MediaStreamTrack object of this receiver is associated with, and initialized to an empty list. 
zh: 让接收器具有[[AssociatedRemoteMediaStreams]]内部槽，表示与该接收器的MediaStreamTrack对象相关联的MediaStream对象的列表，并初始化为空列表。

11. Let receiver have a [[ReceiveCodecs]] internal slot, representing a list of RTCRtpCodecParameters dictionaries, and initialized to an empty list.
zh:让接收器有一个[[ReceiveCodecs]]内部插槽，表示RTCRtpCodecParameters字典列表，并初始化为空列表。

12.  Return receiver. 
zh: 返回接收器。


```
[Exposed=Window] interface RTCRtpReceiver {
    readonly        attribute MediaStreamTrack  track;
    readonly        attribute RTCDtlsTransport? transport;
    readonly        attribute RTCDtlsTransport? rtcpTransport;
    static RTCRtpCapabilities?         getCapabilities (DOMString kind);
    RTCRtpReceiveParameters            getParameters ();
    sequence<RTCRtpContributingSource>    getContributingSources ();
    sequence<RTCRtpSynchronizationSource> getSynchronizationSources ();
    Promise<RTCStatsReport>   getStats();
};
```

**Attributes**

*track* of type MediaStreamTrack, readonly:
zh:追踪类型MediaStreamTrack，readonly


The track attribute is the track that is associated with this RTCRtpReceiver object receiver. 

zh:track属性是与此RTCRtpReceiver对象接收器关联的轨道。

Note that track.stop() is final, although clones are not affected. Since receiver.track.stop() does not implicitly stop receiver, Receiver Reports continue to be sent. On getting, the attribute MUST return the value of the [[ReceiverTrack]] slot.

zh:请注意，track.stop（）是最终的，尽管克隆不受影响。由于receiver.track.stop（）不会隐式停止接收器，因此继续发送Receiver Reports。获取时，属性必须返回[[ReceiverTrack]]槽的值。

*transport* of type RTCDtlsTransport, readonly, nullable:
zh:RTCDtlsTransport类型的传输，只读，可空

The transport attribute is the transport over which media for the receiver's track is received in the form of RTP packets. Prior to construction of the RTCDtlsTransport object, the transport attribute will be null. When bundling is used, multiple RTCRtpReceiver objects will share one transport and will all receive RTP and RTCP over the same transport.

zh:传输属性是以RTP分组的形式接收接收者的轨道的媒体的传输。在构造RTCDtlsTransport对象之前，transport属性将为null。使用捆绑时，多个RTCRtpReceiver对象将共享一个传输，并将通过同一传输接收RTP和RTCP。

On getting, the attribute MUST return the value of the [[ReceiverTransport]] slot.

zh:获取时，属性必须返回[[ReceiverTransport]]槽的值。

*rtcpTransport* of type RTCDtlsTransport, readonly, nullable:
zh:rtcpTransport类型为RTCDtlsTransport，readonly，nullable


The rtcpTransport attribute is the transport over which RTCP is sent and received. Prior to construction of the RTCDtlsTransport object, the rtcpTransport attribute will be null. When RTCP mux is used (or bundling, which mandates RTCP mux), rtcpTransport will be null, and both RTP and RTCP traffic will flow over transport.

zh:rtcpTransport属性是发送和接收RTCP的传输。在构造RTCDtlsTransport对象之前，rtcpTransport属性将为null。当使用RTCP mux（或捆绑，强制执行RTCP mux）时，rtcpTransport将为null，并且RTP和RTCP流量都将通过传输流动。

On getting, the attribute MUST return the value of the [[ReceiverRtcpTransport]] slot.

zh:获取时，属性必须返回[[ReceiverRtcpTransport]]槽的值。

**Methods**

`getCapabilities`, static:
zh:getCapabilities，静态

The getCapabilities() method returns the most optimistic view of the capabilities of the system for receiving media of the given kind. It does not reserve any resources, ports, or other state but is meant to provide a way to discover the types of capabilities of the browser including which codecs may be supported. User agents MUST support kind values of "audio" and "video". If the system has no capabilities corresponding to the value of the kind argument, getCapabilities returns null.

zh:getCapabilities（）方法返回系统功能的最乐观视图，用于接收给定类型的媒体。它不保留任何资源，端口或其他状态，但旨在提供一种方法来发现浏览器的功能类型，包括可能支持的编解码器。用户代理必须支持“音频”和“视频”的类型值。如果系统没有与kind参数的值相对应的功能，则getCapabilities返回null。

These capabilities provide generally persistent cross-origin information on the device and thus increases the fingerprinting surface of the application. In privacy-sensitive contexts, browsers can consider mitigations such as reporting only a common subset of the capabilities.

zh:这些功能通常在设备上提供持久的跨源信息，从而增加了应用程序的指纹表面。在隐私敏感的上下文中，浏览器可以考虑缓解，例如仅报告功能的公共子集。

`getParameters`
zh:getParameters

The getParameters() method returns the RTCRtpReceiver object's current parameters for how track is decoded.

zh:getParameters（）方法返回RTCRtpReceiver对象的当前参数，用于解码轨道的方式。

When getParameters is called, the RTCRtpReceiveParameters dictionary is constructed as follows:

zh:调用getParameters时，RTCRtpReceiveParameters字典构造如下：

*  encodings is populated based on the RIDs present in the current remote description. 
zh: 根据当前远程描述中存在的RID填充编码。

*  The headerExtensions sequence is populated based on the header extensions that the receiver is currently prepared to receive. 
zh: headerExtensions序列基于接收器当前准备接收的头扩展来填充。

*  The codecs sequence is populated based on the codecs that the receiver is currently prepared to receive.  
zh: 编解码器序列基于接收器当前准备接收的编解码器来填充。

	NoteBoth the local and remote description may affect this list of codecs. For example, if three codecs are offered, the receiver will be prepared to receive each of them and will return them all from getParameters. But if the remote endpoint only answers with two, the absent codec will no longer be returned by getParameters as the receiver no longer needs to be prepared to receive it.
	zh:注意本地和远程描述可能会影响此编解码器列表。例如，如果提供了三个编解码器，接收器将准备好接收它们中的每一个，并将从getParameters返回它们。但是如果远程端点只回答两个，则getParameters将不再返回缺少的编解码器，因为接收器不再需要准备接收它。

*  rtcp.reducedSize is set to true if the receiver is currently prepared to receive reduced-size RTCP packets, and false otherwise. rtcp.cname is left out. 
zh: 如果接收器当前准备接收缩小的RTCP数据包，则rtcp.reducedSize设置为true，否则设置为false。 rtcp.cname被省略了。

`getContributingSources`
zh:getContributingSources

Returns an RTCRtpContributingSource for each unique CSRC identifier received by this RTCRtpReceiver in the last 10 seconds. 
zh: 返回此RTCRtpReceiver在过去10秒内收到的每个唯一CSRC标识符的RTCRtpContributingSource。

`getSynchronizationSources`
zh:getSynchronizationSources

Returns an RTCRtpSynchronizationSource for each unique SSRC identifier received by this RTCRtpReceiver in the last 10 seconds. 
zh: 返回此RTCRtpReceiver在过去10秒内收到的每个唯一SSRC标识符的

`getStats`
zh:getStats

Gathers stats for this receiver only and reports the result asynchronously.

zh:仅收集此接收器的统计信息并异步报告结果。

When the  getStats() method is invoked, the user agent MUST run the following steps:

zh:当调用getStats（）方法时，用户代理必须运行以下步骤：

1.  Let selector be the RTCRtpReceiver object on which the method was invoked. 
zh: 让selector成为调用该方法的RTCRtpReceiver对象。

2.  Let p be a new promise, and run the following steps in parallel:
zh:让p成为新的承诺，并行执行以下步骤：

	1.  Gather the stats indicated by selector according to the stats selection algorithm. 
zh: 根据统计选择算法收集选择器指示的统计数据。

	2.  Resolve p with the resulting RTCStatsReport object, containing the gathered stats. 
zh: 使用生成的RTCStatsReport对象解析p，其中包含收集的统计信息。


3.  Return p. 
zh: 返回p。


The RTCRtpContributingSource and RTCRtpSynchronizationSource dictionaries contain information about a given contributing source (CSRC) or synchronization source (SSRC) respectively, including the most recent time a packet that the source contributed to was played out. The browser MUST keep information from RTP packets received in the previous 10 seconds. When the first audio or video frame contained in an RTP packet is delivered to the RTCRtpReceiver's MediaStreamTrack for playout, the user agent MUST queue a task to update the relevant information for the RTCRtpContributingSource and RTCRtpSynchronizationSource dictionaries based on the contents of the packet. The information relevant to the RTCRtpSynchronizationSource dictionary corresponding to the SSRC identifier, is updated each time, and if the RTP packet contains CSRC identifiers, then the information relevant to the RTCRtpContributingSource dictionaries corresponding to those CSRC identifiers is also updated.

zh:RTCRtpContributingSource和RTCRtpSynchronizationSource字典分别包含有关给定贡献源（CSRC）或同步源（SSRC）的信息，包括源所贡献的数据包的最近时间。浏览器必须保留前10秒内收到的RTP数据包的信息。当包含在RTP数据包中的第一个音频或视频帧被传送到RTCRtpReceiver的MediaStreamTrack进行播出时，用户代理必须排队任务，以根据数据包的内容更新RTCRtpContributingSource和RTCRtpSynchronizationSource字典的相关信息。每次更新与SSRC标识符对应的RTCRtpSynchronizationSource字典相关的信息，并且如果RTP分组包含CSRC标识符，则还更新与那些CSRC标识符对应的RTCRtpContributingSource字典相关的信息。

NOTE
As stated in the conformance section, requirements phrased as algorithms may be implemented in any manner so long as the end result is equivalent. So, an implementaion does not need to literally queue a task for every packet, as long as the end result is that within a single event loop task execution, all returned RTCRtpSynchronizationSource and RTCRtpContributingSource dictionaries for a particular RTCRtpReceiver contain information from a single point in the RTP stream.
zh:如一致性部分所述，只要最终结果是等效的，可以以任何方式实现作为算法的要求。因此，实现不需要为每个数据包逐字排队任务，只要最终结果是在单个事件循环任务执行中，所有返回的特定RTCRtpReceiver的RTCRtpSynchronizationSource和RTCRtpContributingSource字典都包含来自单个点的信息。 RTP流。

```
dictionary RTCRtpContributingSource {
    required DOMHighResTimeStamp timestamp;
    required unsigned long       source;
             double              audioLevel;
};
```

#### Dictionary RTCRtpContributingSource Members

*timestamp* of type DOMHighResTimeStamp, required:
zh:需要DOMHighResTimeStamp类型的时间戳

The timestamp of type DOMHighResTimeStamp [HIGHRES-TIME], indicating the most recent time of playout of media that arrived in an RTP packet originating from this source. The timestamp is defined as performance.timeOrigin + performance.now() at the time of playout.

zh:DOMHighResTimeStamp [HIGHRES-TIME]类型的时间戳，指示到达源自此源的RTP数据包的媒体播放的最近时间。时间戳在播出时定义为performance.timeOrigin + performance.now（）。

*source* of type unsigned long, required:
zh:unsigned类型的来源，必需

The CSRC or SSRC identifier of the contributing or synchronization source.

zh:贡献或同步源的CSRC或SSRC标识符。

*audioLevel* of type double:
zh:audioLevel类型为double

Only present for audio receivers. This is a value between 0..1 (linear), where 1.0 represents 0 dBov, 0 represents silence, and 0.5 represents approximately 6 dBSPL change in the sound pressure level from 0 dBov.

zh:仅适用于音频接收器。这是0..1（线性）之间的值，其中1.0表示0 dBov，0表示静音，0.5表示声压级从0 dBov变化约6 dBSPL。

For CSRCs, this MUST be converted from the level value defined in [RFC6465] if the RFC 6465 header extension is present, otherwise this member MUST be absent.

zh:对于CSRC，如果存在RFC 6465标头扩展，则必须从[RFC6465]中定义的级别值转换，否则该成员必须不存在。

For SSRCs, this MUST be converted from the level value defined in [RFC6464] if the RFC 6464 header extension is present, otherwise the user agent must compute the value from the audio data (the member must never be absent for audio receivers).

zh:对于SSRC，如果存在RFC 6464标头扩展，则必须从[RFC6464]中定义的级别值转换，否则用户代理必须从音频数据计算值（音频接收器不得缺少该成员）。

Both RFCs define the level as an integral value from 0 to 127 representing the audio level in negative decibels relative to the loudest signal that the system could possibly encode. Thus, 0 represents the loudest signal the system could possibly encode, and 127 represents silence.

zh:两个RFC将级别定义为0到127的整数值，表示相对于系统可能编码的最大信号的负分贝的音频电平。因此，0代表系统可能编码的最响亮信号，127代表静音。

To convert these values to the linear 0..1 range, a value of 127 is converted to 0, and all other values are converted using the equation: 10^(-rfc_level/20).

zh:要将这些值转换为线性0..1范围，将值127转换为0，并使用以下公式转换所有其他值：10 ^（ -  rfc_level / 20）。

```
dictionary RTCRtpSynchronizationSource : RTCRtpContributingSource {
    boolean voiceActivityFlag;
};
```

**Dictionary RTCRtpSynchronizationSource Members**

*voiceActivityFlag* of type boolean:
zh:boolean类型的voiceActivityFlag

Only present for audio receivers. Whether the last RTP packet played from this source contains voice activity (true) or not (false). If the RFC 6464 extension header was not present, or if the peer has signaled that it is not using the V bit by setting the "vad" extension attribute to "off", as described in [RFC6464], Section 4, voiceActivityFlag will be absent.

zh:仅适用于音频接收器。从该源播放的最后一个RTP数据包是否包含语音活动（true）或不包含语音活动（false）。如果RFC 6464扩展头不存在，或者对等体通过将“vad”扩展属性设置为“off”来表示它没有使用V bit，如[RFC6464]第4节中所述，则voiceActivityFlag将是缺席。